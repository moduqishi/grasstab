# 更新日志 / Changelog

所有重要的项目变更都会记录在这个文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [未发布] - 2025-12-07

### ✨ 新增 - 多源图标系统
- 📷 **7层图标降级策略**
  - Priority 1: icon.horse - 高质量、广泛覆盖、自动降级
  - Priority 2: Clearbit - 商标级质量，主流公司首选
  - Priority 3: unavatar.io - 多源聚合备选方案
  - Priority 4: Google Favicon - 可靠但质量一般
  - Priority 5: DuckDuckGo - 隐私友好的优质备选
  - Priority 6: Favicon Kit - API可定制尺寸
  - Priority 7: Direct - 直接从网站获取

- 🛠️ **新增工具函数**
  - `getIconUrl(url)` - 获取最佳图标URL
  - `getAllIconUrls(url)` - 获取所有图标源（按优先级）
  - `getIconSources(url)` - 获取图标源对象

### 🔧 优化 - 图标系统
- **自动降级机制**
  - 图标加载失败自动切换下一个源
  - 保留原有的缩放和显示逻辑（object-cover）
  - 最终降级到文字图标

- **性能优化**
  - 使用 useEffect 在 URL 变化时重置图标源
  - 减少不必要的重渲染
  - 保持图标加载的流畅性

### 📝 文档
- 新增 `ICON-SYSTEM.md` 图标系统详细文档
- 包含 API 说明、使用示例、调试技巧
- 各图标源的特点和质量对比

---

## [未发布] - 2025-12-06

### ✨ 新增
- 📱 **完整移动端支持**
  - 响应式时间和日期显示（5种断点适配）
  - 自适应搜索栏（支持小屏、中屏、大屏）
  - 响应式网格布局（3/4/6/8 列自动切换）
  - 移动端优化的 Dock（高度和圆角自适应）
  - 移动端优化的分页指示器
  - 触摸友好的按钮尺寸（最小 44×44px）

- 🖐️ **触摸体验优化**
  - 防止双击缩放
  - 移除点击高亮
  - 添加触摸反馈动画（active 状态）
  - 输入框防止 iOS 自动缩放（16px 字体）

- 📱 **移动端特定功能**
  - 窗口自动全屏（< 768px 设备）
  - 安全区域适配（支持刘海屏）
  - 移动端自动隐藏分页按钮
  - 响应式图标大小（90px/100px/130px）

- 🛠️ **开发工具**
  - 添加 `dev-mobile.bat` 移动端调试脚本
  - 创建移动端适配文档 `MOBILE-ADAPTATION.md`
  - 创建移动端测试清单 `MOBILE-TEST-CHECKLIST.md`

### 🔧 优化
- **搜索栏**
  - 容器宽度: 95% (移动) / 90% (桌面)
  - 引擎按钮: 32px (移动) / 40px (桌面)
  - 输入框字体: 16px (移动) / 18px (桌面)
  - 清除按钮: 28px (移动) / 32px (桌面)

- **搜索建议**
  - 圆角: 12px (移动) / 16px (桌面)
  - 最大高度: 400px (移动) / 500px (桌面)
  - 文字大小: 14px (移动) / 16px (桌面)
  - 添加文字截断防止溢出

- **网格布局**
  - 顶部间距: 250px/320px/380px (响应式)
  - 底部间距: 140px/160px/180px (有 Dock 时)
  - 图标高度: 90px/100px/130px (根据屏幕)
  - 最小行数保证: 3 行

- **Dock**
  - 高度: 80px/100px/120px (响应式)
  - 圆角: 24px/30px/35px (响应式)
  - 图标圆角: 12px/14px/16px (响应式)
  - 底部距离: 16px/24px/32px (响应式)

- **分页指示器**
  - 点间距: 6px (移动) / 10px (桌面)
  - 底部位置根据 Dock 状态动态调整

### 🎨 UI 改进
- 时间显示: `text-5xl → text-8xl` (5 个断点)
- 日期显示: `text-sm → text-xl` (4 个断点)
- 搜索建议项添加 `truncate` 防止文字溢出
- 所有交互元素添加 `active:` 状态增强反馈

### 📝 文档
- 更新 `README.md` 添加移动端支持章节
- 新增移动端适配详细说明文档
- 新增完整的移动端测试清单
- 添加开发调试指南

### 🔧 技术改进
- HTML meta 标签优化:
  - 添加 `maximum-scale=1.0, user-scalable=no`
  - 添加 `viewport-fit=cover` 适配安全区域
  - 添加 PWA 相关 meta 标签
- CSS 全局样式:
  - `touch-action: manipulation` 防止缩放
  - `-webkit-tap-highlight-color: transparent` 移除高亮
  - 安全区域 padding 使用 `env(safe-area-inset-*)`
- Grid 计算优化:
  - 根据屏幕大小动态调整预留空间
  - 移动端特殊处理最小图标尺寸

---

## [0.0.0] - 初始版本

### ✨ 新增
- 🎨 美观的 UI 设计
- 📌 自定义快捷方式
- 🔍 多引擎搜索（Google/Bing/Baidu）
- 🪟 窗口化应用系统
- 📊 小部件支持
- 🎯 拖拽排序功能
- 📄 多页面支持
- 🌐 多语言支持
- 💾 配置导入/导出
- ⚙️ 丰富的设置选项

---

## 版本说明

### 版本号格式
- **主版本号**: 不兼容的 API 修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

### 变更类型
- `✨ 新增`: 新功能
- `🔧 优化`: 改进现有功能
- `🐛 修复`: Bug 修复
- `🎨 UI`: UI/样式改进
- `📝 文档`: 文档变更
- `🔨 重构`: 代码重构
- `⚡ 性能`: 性能优化
- `🔒 安全`: 安全相关
- `🗑️ 移除`: 移除功能或文件
- `⬆️ 依赖`: 依赖更新

---

更新时间: 2025-12-06

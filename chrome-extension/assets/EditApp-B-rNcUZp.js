import{c as T,u as A,r as a,j as e,t as r,M as v,l as E}from"./index-CQcVGI0j.js";import{I as L}from"./IconSelector-CqeFPkFB.js";import{M as H}from"./monitor-4Kc3nfXb.js";import"./loader-circle-Ckjz1Rfe.js";/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],F=T("globe",P),D=({app:l,onSave:j,language:k="zh"})=>{A();const o=l.type==="widget",s=k,[u,w]=a.useState(l.title||""),[c,C]=a.useState(l.url||""),[x,N]=a.useState(l.customIcon||""),[m,b]=a.useState(""),[R,p]=a.useState(l.customIcon||""),[n,I]=a.useState(l.isApp||!1),[i,M]=a.useState(l.widgetType||"clock"),[h,S]=a.useState(l.size?.w||2),[f,z]=a.useState(l.size?.h||2),[g,y]=a.useState(l.widgetContent||""),W=()=>{const d={...l,title:u,url:c,customIcon:m||x||void 0,isApp:o?l.isApp:n};o&&(d.widgetType=i,d.size={w:h,h:f},d.widgetContent=g),j(d)};return e.jsxs("div",{className:"w-full h-full relative flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 pb-24 space-y-5",onWheel:t=>t.stopPropagation(),children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"rgba(255, 255, 255, 0.7)"},children:r(s,"name")}),e.jsx("input",{type:"text",value:u,onChange:t=>w(t.target.value),className:"w-full px-4 py-2.5 rounded-lg outline-none transition-all",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)"},placeholder:o?r(s,"enterWidgetName"):r(s,"enterAppName")})]}),(!o||i==="iframe")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"rgba(255, 255, 255, 0.7)"},children:o?r(s,"embedLink"):r(s,"linkAddress")}),e.jsx("input",{type:"text",value:c,onChange:t=>C(t.target.value),className:"w-full px-4 py-2.5 rounded-lg outline-none transition-all",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)"},placeholder:o?"https://example.com":r(s,"enterUrl")})]}),!o&&c&&e.jsx("div",{children:e.jsx(L,{url:c,currentIcon:m||x,onSelect:t=>{b(t),p(t)},onCustom:t=>{N(t),p(t),b("")}})}),!o&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg",style:{backgroundColor:"rgba(255, 255, 255, 0.05)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{size:20,style:{color:"rgba(255, 255, 255, 0.7)"}}),e.jsx("span",{className:"text-sm font-medium",style:{color:"rgba(255, 255, 255, 0.9)"},children:"窗口模式打开"})]}),e.jsx("button",{onClick:()=>I(!n),className:"relative w-12 h-6 rounded-full transition-colors",style:{backgroundColor:n?"#34C759":"rgba(255, 255, 255, 0.2)"},"aria-label":"切换窗口模式",title:n?"禁用窗口模式":"启用窗口模式",children:e.jsx("div",{className:"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform",style:{transform:n?"translateX(24px)":"translateX(0)"}})})]}),e.jsx("div",{className:"text-xs px-4",style:{color:"rgba(255, 255, 255, 0.5)"},children:"大部分网站不支持在窗口中打开"})]}),o&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"rgba(255, 255, 255, 0.7)"},children:"小组件类型"}),e.jsxs("select",{value:i,onChange:t=>M(t.target.value),className:"w-full px-4 py-2.5 rounded-lg outline-none transition-all cursor-pointer appearance-none",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.15)",color:"rgba(255, 255, 255, 0.9)",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='rgba(255,255,255,0.5)' d='M6 9L1 4h10z'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",paddingRight:"36px"},title:"选择小组件类型","aria-label":"小组件类型选择器",children:[e.jsx("option",{value:"clock",style:{backgroundColor:"#2a2a2a",color:"#fff",padding:"8px"},children:"时钟"}),e.jsx("option",{value:"calendar",style:{backgroundColor:"#2a2a2a",color:"#fff",padding:"8px"},children:"日历"}),e.jsx("option",{value:"weather",style:{backgroundColor:"#2a2a2a",color:"#fff",padding:"8px"},children:"天气"}),e.jsx("option",{value:"custom",style:{backgroundColor:"#2a2a2a",color:"#fff",padding:"8px"},children:"自定义 HTML"}),e.jsx("option",{value:"iframe",style:{backgroundColor:"#2a2a2a",color:"#fff",padding:"8px"},children:"嵌入网页"})]})]}),o&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",style:{color:"rgba(255, 255, 255, 0.7)"},children:[e.jsx(v,{size:16}),"宽度"]}),e.jsx("input",{type:"number",min:"1",max:"6",value:h,onChange:t=>S(Math.max(1,Math.min(6,parseInt(t.target.value)||1))),className:"w-full px-4 py-2.5 rounded-lg outline-none transition-all",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)"},title:"设置宽度","aria-label":"小组件宽度"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",style:{color:"rgba(255, 255, 255, 0.7)"},children:[e.jsx(v,{size:16,className:"rotate-90"}),"高度"]}),e.jsx("input",{type:"number",min:"1",max:"6",value:f,onChange:t=>z(Math.max(1,Math.min(6,parseInt(t.target.value)||1))),className:"w-full px-4 py-2.5 rounded-lg outline-none transition-all",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)"},title:"设置高度","aria-label":"小组件高度"})]})]}),o&&i==="custom"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",style:{color:"rgba(255, 255, 255, 0.7)"},children:[e.jsx(E,{size:16}),"HTML 代码"]}),e.jsx("textarea",{value:g,onChange:t=>y(t.target.value),className:"w-full px-4 py-2.5 rounded-lg outline-none transition-all font-mono text-sm",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)"},rows:6,placeholder:"<div>自定义 HTML 内容</div>"})]}),o&&i==="iframe"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",style:{color:"rgba(255, 255, 255, 0.7)"},children:[e.jsx(F,{size:16}),"嵌入链接"]}),e.jsx("input",{type:"text",value:g,onChange:t=>y(t.target.value),className:"w-full px-4 py-2.5 rounded-lg outline-none transition-all",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)"},placeholder:"https://example.com"})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-6 py-4 flex justify-end",style:{background:"linear-gradient(to top, rgba(30, 30, 35, 0.95) 0%, rgba(30, 30, 35, 0.85) 100%)",borderTop:"0.5px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},onClick:t=>t.stopPropagation(),children:e.jsx("button",{onClick:W,className:"px-6 py-2.5 rounded-lg transition-all font-medium hover:brightness-110 active:scale-95",style:{backgroundColor:"#007AFF",color:"white",boxShadow:"0 2px 8px rgba(0, 122, 255, 0.4)"},children:"保存"})})]})};export{D as EditApp};
